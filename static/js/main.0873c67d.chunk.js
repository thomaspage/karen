(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(2),i=n.n(o),c=(n(13),n(3)),s=n(4),u=n(6),l=n(5),h=n(7);n(14);function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var f=Object.freeze({START:"start",PAUSE:"pause",STOP:"stop",NONE:"none"}),v=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).init=function(){try{return n.leftchannel=[],n.rightchannel=[],n.recorder=null,n.recording=!1,n.recordingLength=0,n.volume=null,n.audioInput=null,n.sampleRate=null,n.AudioContext=window.AudioContext||window.webkitAudioContext,n.context=null,n.analyser=null,n.canvas=n.canvasRef.current,n.canvasCtx=n.canvas.getContext("2d"),n.stream=null,n.tested=!1,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,Promise.resolve()}catch(e){return Promise.reject(e)}},n.getStream=function(e){return e||(e={audio:!0,video:!1}),navigator.mediaDevices.getUserMedia(e)},n.setUpRecording=function(){n.context=new n.AudioContext,n.sampleRate=n.context.sampleRate,n.volume=n.context.createGain(),n.audioInput=n.context.createMediaStreamSource(n.stream),n.analyser=n.context.createAnalyser(),n.audioInput.connect(n.analyser);n.recorder=n.context.createScriptProcessor(2048,2,2),n.analyser.connect(n.recorder),n.recorder.connect(n.context.destination);var e=d(n);n.recorder.onaudioprocess=function(t){if(e.recording){var n=t.inputBuffer.getChannelData(0),r=t.inputBuffer.getChannelData(1);e.tested||(e.tested=!0,n.reduce(function(e,t){return e+t})||(console.log("Error: There seems to be an issue with your Mic"),e.stop(),e.stream.getTracks().forEach(function(e){e.stop()}))),e.leftchannel.push(new Float32Array(n)),e.rightchannel.push(new Float32Array(r)),e.recordingLength+=2048}},n.visualize()},n.mergeBuffers=function(e,t){for(var n=new Float32Array(t),r=0,a=e.length,o=0;o<a;o++){var i=e[o];n.set(i,r),r+=i.length}return n},n.interleave=function(e,t){for(var n=e.length+t.length,r=new Float32Array(n),a=0,o=0;o<n;)r[o++]=e[a],r[o++]=t[a],a++;return r},n.writeUTFBytes=function(e,t,n){for(var r=n.length,a=0;a<r;a++)e.setUint8(t+a,n.charCodeAt(a))},n.visualize=function(){var e=n.props,t=e.backgroundColor,r=e.foregroundColor;if(n.WIDTH=n.canvas.width,n.HEIGHT=n.canvas.height,n.CENTERX=n.canvas.width/2,n.CENTERY=n.canvas.height/2,n.analyser){n.analyser.fftSize=512;var a=n.analyser.fftSize,o=new Uint8Array(a);n.canvasCtx.clearRect(0,0,n.WIDTH,n.HEIGHT);var i=d(n);!function e(){i.drawVisual=requestAnimationFrame(e),i.analyser.getByteTimeDomainData(o),i.canvasCtx.fillStyle=t,i.canvasCtx.fillRect(0,0,i.WIDTH,i.HEIGHT),i.canvasCtx.lineWidth=4,i.canvasCtx.strokeStyle=r,i.canvasCtx.beginPath();for(var n=1*i.WIDTH/a,c=0,s=o.every(function(e){return e<132}),u=0;u<a;u++){var l;if(s)l=i.HEIGHT/2;else{var h=o[u]/128,d=-2*Math.pow(u,3)*Math.pow(u-a,3)/Math.pow(a/2,6);l=d*h*i.HEIGHT/2+(i.HEIGHT/2-d*i.HEIGHT/2)}0===u?i.canvasCtx.moveTo(c,l):i.canvasCtx.lineTo(c,l),c+=n}i.canvasCtx.lineTo(i.canvas.width,i.canvas.height/2),i.canvasCtx.stroke()}()}},n.setupMic=function(){try{var e=function(){n.setUpRecording()},t=function(e,t){try{var n=e()}catch(r){return t(r)}return n&&n.then?n.then(void 0,t):n}(function(){return Promise.resolve(n.getStream()).then(function(e){window.stream=n.stream=e})},function(e){console.log("Error: Issue getting mic",e)});return Promise.resolve(t&&t.then?t.then(e):e())}catch(r){return Promise.reject(r)}},n.start=function(){try{return Promise.resolve(n.setupMic()).then(function(){n.recording=!0,n.leftchannel.length=n.rightchannel.length=0,n.recordingLength=0})}catch(e){return Promise.reject(e)}},n.stop=function(){var e=n.props,t=e.onStop,r=e.type;n.recording=!1,n.closeMic(),n.leftBuffer=n.mergeBuffers(n.leftchannel,n.recordingLength),n.rightBuffer=n.mergeBuffers(n.rightchannel,n.recordingLength);var a=n.interleave(n.leftBuffer,n.rightBuffer),o=new ArrayBuffer(44+2*a.length),i=new DataView(o);n.writeUTFBytes(i,0,"RIFF"),i.setUint32(4,44+2*a.length,!0),n.writeUTFBytes(i,8,"WAVE"),n.writeUTFBytes(i,12,"fmt "),i.setUint32(16,16,!0),i.setUint16(20,1,!0),i.setUint16(22,2,!0),i.setUint32(24,n.sampleRate,!0),i.setUint32(28,4*n.sampleRate,!0),i.setUint16(32,4,!0),i.setUint16(34,16,!0),n.writeUTFBytes(i,36,"data"),i.setUint32(40,2*a.length,!0);for(var c=a.length,s=44,u=0;u<c;u++)i.setInt16(s,32767*a[u],!0),s+=2;var l=new Blob([i],{type:r}),h=URL.createObjectURL(l);t&&t({blob:l,url:h,type:r})},n.pause=function(){n.recording=!1,n.closeMic()},n.resume=function(){n.setupMic(),n.recording=!0},n.closeMic=function(){n.stream.getAudioTracks().forEach(function(e){e.stop()}),n.audioInput.disconnect(0),n.analyser.disconnect(0),n.recorder.disconnect(0)},n.canvasRef=a.a.createRef(),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidMount=function(){this.init()},o.componentDidUpdate=function(e,t){var n=this.props.state;this.checkState(e.state,n)},o.checkState=function(e){switch(e){case f.START:this.doIfState(f.PAUSE,this.pause),this.doIfState(f.STOP,this.stop);break;case f.PAUSE:this.doIfState(f.START,this.resume),this.doIfState(f.STOP,this.stop);break;case f.STOP:default:this.doIfState(f.START,this.start)}},o.doIfState=function(e,t){this.props.state===e&&t&&t()},o.componentWillUnmount=function(){},o.render=function(){var e=this.props,t=e.canvasWidth,n=e.canvasHeight;return a.a.createElement("div",{className:"audio-react-recorder"},a.a.createElement("canvas",{ref:this.canvasRef,width:t,height:n,className:"audio-react-recorder__canvas"}))},r}(a.a.Component);v.defaultProps={state:f.NONE,type:"audio/wav",backgroundColor:"rgb(200, 200, 200)",foregroundColor:"rgb(0, 0, 0)",canvasWidth:500,canvasHeight:300};var g=v,p=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).componentDidMount=function(){n.setState({recordState:f.START,canvasWidth:window.innerWidth,canvasHeight:window.innerHeight})},n.start=function(){n.setState({recordState:f.START})},n.stop=function(){n.setState({recordState:f.STOP})},n.onStop=function(e){n.setState({recordState:f.STOP})},n.state={recordState:null,canvasWidth:500,canvasHeight:300},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.canvasHeight,n=e.canvasWidth,r=e.recordState;return a.a.createElement("div",{style:{backgroundColor:"rgb(15,18,23)"}},a.a.createElement(g,{canvasHeight:t,canvasWidth:n,backgroundColor:"rgb(15,18,23)",foregroundColor:"rgb(185,215,124)",state:r,onStop:this.onStop}))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(p,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,n){e.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.0873c67d.chunk.js.map